<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Payment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Inter font to match the app -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* --- same design tokens as home/payment --- */
    :root{
      --bg: #0f172a;
      --card: #ffffff;
      --text: #0b1220;
      --muted: #6b7280;
      --accent: #2563eb;
      --accent-2: #0ea5e9;
      --shadow: 0 12px 30px rgba(15, 23, 42, .12);
      --radius: 16px;
    }
    *{ box-sizing: border-box; }
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 1200px at 20% -10%, rgba(37,99,235,.25), transparent 40%),
        radial-gradient(1000px 1000px at 120% 0%, rgba(14,165,233,.18), transparent 40%),
        #f5f7fb;
    }
    .shell{ max-width: 860px; margin: 48px auto; padding: 0 20px; }
    .header{
      background: linear-gradient(135deg, var(--bg), #1e293b);
      color:#fff; border-radius: var(--radius); padding: 24px 28px;
      box-shadow: var(--shadow); display:flex; align-items:center; justify-content:space-between; gap:16px;
    }
    .brand{ font-weight: 700; letter-spacing: .2px; display:flex; align-items:center; gap:.75rem; }
    .brand-logo{ width:42px; height:auto; display:block; }
    .card{ background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); padding: 28px; margin-top: 22px; }
    h1{ margin:0 0 12px 0; font-size: clamp(22px, 3vw, 28px); letter-spacing: -0.3px; }
    p{ margin: 0 0 20px 0; color: var(--muted); }
    .row{ display:flex; flex-wrap:wrap; gap:18px; align-items:center; }
    .field{ flex:1 1 260px; display:flex; flex-direction:column; }
    label{ font-weight:600; margin-bottom:6px; }
    input{ padding:12px; border:1px solid #e5e7eb; border-radius:12px; }
    .btn{
      display:inline-flex; align-items:center; gap:.5rem; padding: 12px 18px; border-radius: 12px;
      text-decoration:none; font-weight: 600; border: 1px solid transparent; cursor:pointer;
    }
    .btn-primary{ background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:#fff; box-shadow: 0 10px 20px rgba(37,99,235,.25); }
    .btn-link{ background:#fff; border:1px solid #e5e7eb; color: var(--accent); }
    .divider{ height:1px; background:#eef2f7; margin:20px 0; }
    pre.code{ background:#0f172a; color:#e2e8f0; border-radius:12px; padding:14px; overflow:auto; }
  </style>
</head>
<body>
  <div class="shell">
    <!-- Header -->
    <div class="header">
      <div class="brand">
        <img th:src="@{/images/amo-logo.png}" alt="@MO Logo" class="brand-logo" />
        <span>Payments</span>
      </div>
      <form th:action="@{/logout}" method="post">
        <button type="submit" class="btn btn-link">Logout</button>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      </form>
    </div>

    <main class="card" role="main">
      <h1>Make a Payment</h1>
      <p class="muted">Apply a payment from A to B on the matrix (server-to-server).</p>

      <form th:action="@{/payment}" method="post" th:object="${form}">
        <div class="row">
          <div class="field">
            <label>Blob name *</label>
            <input th:field="*{blob_name}" placeholder="e.g. sample.b64" required>
          </div>
          <div class="field">
            <label>Container (optional)</label>
            <input th:field="*{container}" placeholder="e.g. mycontainer">
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Node A *</label>
            <input th:field="*{node_a}" placeholder="Alice" required>
          </div>
          <div class="field">
            <label>Node B *</label>
            <input th:field="*{node_b}" placeholder="Bob" required>
          </div>
          <div class="field">
            <label>Amount *</label>
            <input th:field="*{amount}" type="number" step="0.01" placeholder="100.00" required>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Out base (optional)</label>
            <input th:field="*{out_base}" placeholder="payment-update">
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
          <button class="btn btn-primary" type="submit">Submit Payment</button>
          <a class="btn btn-link" th:href="@{/home}">Cancel</a>
        </div>

        <div style="color:#b91c1c;margin-top:10px" th:if="${error}" th:text="${error}"></div>
      </form>
    </main>

    <section class="card" th:if="${result}" style="margin-top:18px">
      <h2 style="margin-top:0;">Result</h2>
      <pre class="code" th:text="${#objects.toJson(result)}"></pre>
    </section>
  </div>
</body>
</html>
